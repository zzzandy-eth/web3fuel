{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-grid">
            <div>
                <h1>Building the Future of <span class="hero-accent">Cross-Chain</span><br>Infrastructure.</h1>
                <p class="hero-subtitle">Deep research, practical tools, and insights for the multi-chain world. Building cross-chain infrastructure solutions, one bridge at a time.</p>
            </div>
            
            <div class="hero-visual">
                <div class="cube">
                    <div class="cube-face face-front">ETH</div>
                    <div class="cube-face face-back">AVAX</div>
                    <div class="cube-face face-right">MATIC</div>
                    <div class="cube-face face-left">ARB</div>
                    <div class="cube-face face-top">OP</div>
                    <div class="cube-face face-bottom">BASE</div>
                </div>
            </div>
        </div>
        
        <!-- Hero stats spanning full width -->
        <div class="hero-stats">
            <div class="stat-card">
                <div class="stat-value">15+</div>
                <div class="stat-label">Bridges Analyzed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">$2.8B</div>
                <div class="stat-label">Bridge Hacks Studied</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">8</div>
                <div class="stat-label">Blockchains Monitored</div>
            </div>
        </div>
    </div>
</section>

<!-- Services Section - Homepage2 Style -->
<section class="services-section">
    <div class="container">
        <h2 class="services-title">Research & Infrastructure Tools</h2>
        
        <div class="products-grid">
            <!-- Cross-Chain Tools -->
            <div class="product-card cross-chain-tools">
                <div class="product-header">
                    <span class="product-icon">üõ†Ô∏è</span>
                    <h3 class="product-title">Cross-Chain Tools</h3>
                </div>
                <p class="product-description">Practical tools for navigating the multi-chain world. Bridge comparisons, portfolio tracking, and analytics built for the cross-chain economy.</p>
                
                <ul class="product-features">
                    <li>Bridge fee comparison tracker</li>
                    <li>Cross-chain portfolio dashboard</li>
                    <li>Transaction status monitoring</li>
                    <li>Multi-chain gas price alerts</li>
                </ul>
                
                <div style="text-align: center;">
                    <a href="/tools" class="product-cta">
                        Try the Tools ‚Üí
                    </a>
                </div>
            </div>
            
            <!-- Cross-Chain Research -->
            <div class="product-card research-insights">
                <div class="product-header">
                    <span class="product-icon">üîó</span>
                    <h3 class="product-title">Cross-Chain Research</h3>
                </div>
                <p class="product-description">In-depth analysis of bridge security, cross-chain protocols, and multi-chain infrastructure. Academic-quality research for the practitioner community.</p>
                
                <ul class="product-features">
                    <li>Bridge security audits & comparisons</li>
                    <li>Protocol architecture deep-dives</li>
                    <li>Cross-chain MEV analysis</li>
                    <li>Infrastructure trend reports</li>
                </ul>
                
                <div style="text-align: center;">
                    <a href="/research" class="product-cta">
                        Explore Research ‚Üí
                    </a>
                </div>
            </div>
        </div>
        <div class="cross-chain-cta-section">
            <h3 class="cross-chain-cta-title">Building Cross-Chain Infrastructure, In Public</h3>
            <p class="cross-chain-cta-description">
                From blockchain development to cross-chain expertise, <br>documenting every lesson learned along the way.
            </p>
            <a href="/blog" class="cross-chain-cta-button">
                Follow the Journey ‚Üí
            </a>
        </div>
    </div>
</section>

<!-- Cross-Chain Infrastructure Expertise Section -->
<section class="cross-chain-expertise-section">
    <div class="container">
        <h2 class="cross-chain-expertise-title">Cross-Chain Infrastructure Expertise</h2>
        <p class="cross-chain-expertise-subtitle">Deep understanding of bridge security, protocol architecture, <br>and the challenges of building truly decentralized infrastructure.</p>
        
        <div class="cross-chain-solutions-grid">
            <!-- Bridge Security Analysis -->
            <div class="solution-category bridge-security-category">
                <div class="solution-header">
                    <span class="solution-icon">üõ°Ô∏è</span>
                    <h3 class="solution-title">Bridge Security Analysis</h3>
                </div>
                <div class="solution-items">
                    <div class="solution-item">
                        <div class="solution-item-icon">üîç</div>
                        <div class="solution-item-content">
                            <h4>Security Audits</h4>
                            <p>Comprehensive analysis of bridge architectures and trust assumptions</p>
                        </div>
                    </div>
                    <div class="solution-item">
                        <div class="solution-item-icon">üìä</div>
                        <div class="solution-item-content">
                            <h4>Risk Assessment</h4>
                            <p>Quantitative risk scoring based on TVL, validator sets, and history</p>
                        </div>
                    </div>
                    <div class="solution-item">
                        <div class="solution-item-icon">‚ö†Ô∏è</div>
                        <div class="solution-item-content">
                            <h4>Vulnerability Research</h4>
                            <p>Analysis of past bridge hacks and common attack vectors</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Infrastructure Development -->
            <div class="solution-category protocol-analysis-category">
                <div class="solution-header">
                    <span class="solution-icon">üèóÔ∏è</span>
                    <h3 class="solution-title">Infrastructure Development</h3>
                </div>
                <div class="solution-items">
                    <div class="solution-item">
                        <div class="solution-item-icon">üîß</div>
                        <div class="solution-item-content">
                            <h4>Tool Development</h4>
                            <p>Building practical tools for cross-chain users, developers, and researchers</p>
                        </div>
                    </div>
                    <div class="solution-item">
                        <div class="solution-item-icon">üìà</div>
                        <div class="solution-item-content">
                            <h4>Analytics Platforms</h4>
                            <p>Data visualization and monitoring for multi-chain protocols and networks</p>
                        </div>
                    </div>
                    <div class="solution-item">
                        <div class="solution-item-icon">üåê</div>
                        <div class="solution-item-content">
                            <h4>Protocol Integration</h4>
                            <p>Smart contract development and cross-chain implementation</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Split-Screen Comparison -->
        <div class="comparison-grid">
            <!-- Research Impact -->
            <div class="comparison-card cross-chain-tools">
                <div class="comparison-header">
                    <span class="comparison-badge">Research Impact</span>
                </div>
                <p class="comparison-quote">"Analyzed 15 major bridges and uncovered common security patterns that led to $2.8B in losses"</p>
                <p class="comparison-result">‚Üí Result: 47-page security framework helping users choose safer bridges</p>
                
                <ul class="feature-list">
                    <li>Comprehensive bridge database</li>
                    <li>Risk scoring methodology</li>
                    <li>Real-world vulnerability analysis</li>
                </ul>
            </div>
            
            <!-- Tool Development -->
            <div class="comparison-card research-insights">
                <div class="comparison-header">
                    <span class="comparison-badge">Tool Development</span>
                </div>
                <p class="comparison-quote">"Built bridge fee tracker showing users can save 60%+ by choosing optimal routes"</p>
                <p class="comparison-result">‚Üí Result: Helping users save thousands in unnecessary bridge fees</p>
                
                <ul class="feature-list">
                    <li>Real-time fee comparison</li>
                    <li>Multi-chain portfolio tracking</li>
                    <li>Transaction monitoring dashboard</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta" id="contact">
    <div class="container">
        <div class="cta-container">
            <div class="cta-content">
                <div class="cta-text">
                    <h2 class="cta-title">Ready to Collaborate on <br>Cross-Chain Infrastructure?</h2>
                    <p class="cta-description">Whether you're looking for research insights, tool development, or consulting on cross-chain strategy, let's discuss how we can work together to build better infrastructure.</p>
                </div>
                
                <div class="contact-form">
                    <form id="contactForm" onsubmit="sendEmail(event)">
                        <div class="form-group">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" id="name" name="name" class="form-input" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" id="email" name="email" class="form-input" required>
                        </div>


                        <div class="appointment-toggle">
                            <input type="checkbox" id="appointmentToggle" class="toggle-checkbox" onchange="toggleAppointmentFields()">
                            <label for="appointmentToggle" class="toggle-label">Schedule a call to discuss</label>
                        </div>

                        <!-- Appointment Fields (Hidden by default) -->
                        <div class="appointment-fields" id="appointmentFields">
                            <div class="appointment-header">üìÖ Schedule Your Call</div>
                            <div class="form-group">
                                <label for="datetime" class="form-label">Preferred Date & Time (EST)</label>
                                <input type="datetime-local" id="datetime" name="datetime" class="form-input">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="message" class="form-label">Message</label>
                            <textarea id="message" name="message" class="form-input form-textarea" required></textarea>
                        </div>
                        
                        <button type="submit" class="form-submit">Send Message</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    // Cube rotation interaction
    document.addEventListener('DOMContentLoaded', function() {
        const cube = document.querySelector('.cube');
        const heroSection = document.querySelector('.hero');
        
        if (cube && heroSection) {
            let rotateX = 0;
            let rotateY = 0;
            let isAutoRotating = true;
            let autoRotateInterval;
            
            function startAutoRotate() {
                isAutoRotating = true;
                autoRotateInterval = setInterval(() => {
                    rotateX += 0.3;
                    rotateY += 0.3;
                    updateCubeRotation();
                }, 50);
            }
            
            function stopAutoRotate() {
                isAutoRotating = false;
                clearInterval(autoRotateInterval);
            }
            
            function updateCubeRotation() {
                cube.style.transform = 'rotateX(' + rotateX + 'deg) rotateY(' + rotateY + 'deg)';
            }
            
            heroSection.addEventListener('mousemove', function(e) {
                if (isAutoRotating) {
                    stopAutoRotate();
                }
                
                const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
                const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
                
                rotateX = yAxis;
                rotateY = -xAxis;
                
                updateCubeRotation();
            });
            
            heroSection.addEventListener('mouseleave', function() {
                startAutoRotate();
            });
            
            startAutoRotate();
        }

        // Set minimum date to today for datetime picker
        const datetimeInput = document.getElementById('datetime');
        if (datetimeInput) {
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            datetimeInput.min = now.toISOString().slice(0, 16);
        }
    });

    // Toggle appointment fields
    function toggleAppointmentFields() {
        const checkbox = document.getElementById('appointmentToggle');
        const fields = document.getElementById('appointmentFields');
        const datetimeInput = document.getElementById('datetime');
        
        if (checkbox.checked) {
            fields.classList.add('show');
            datetimeInput.required = true;
            
            // Set minimum date to today for datetime picker
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            datetimeInput.min = now.toISOString().slice(0, 16);
        } else {
            fields.classList.remove('show');
            datetimeInput.required = false;
            datetimeInput.value = '';
        }
    }

    // Alert Functions
    function showAlert(message, type) {
        const alertContainer = document.getElementById('alert-container');
        const alert = document.createElement('div');
        alert.className = `alert alert-${type} show`;
        alert.textContent = message;
        
        alertContainer.innerHTML = '';
        alertContainer.appendChild(alert);
        
        setTimeout(() => {
            alert.classList.remove('show');
            setTimeout(() => alertContainer.innerHTML = '', 300);
        }, 5000);
    }
    
    // Contact form submission
    function sendEmail(event) {
        event.preventDefault();
        
        const submitBtn = document.getElementById('submitBtn');
        const originalText = submitBtn.textContent;
        
        // Disable button and show loading state
        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending...';
        
        // Initialize EmailJS with your public key
        emailjs.init("xSYgQUruN6qY2C0o2");
        
        // Check if appointment is requested
        const appointmentRequested = document.getElementById('appointmentToggle').checked;
        let estDateTime = 'No appointment requested';
        
        if (appointmentRequested) {
            const datetimeInput = document.getElementById('datetime').value;
            if (datetimeInput) {
                const selectedDate = new Date(datetimeInput);
                estDateTime = selectedDate.toLocaleString("en-US", {
                    timeZone: "America/New_York",
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                }) + " EST";
            }
        }
        
        const params = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            inquiry_type: 'Cross-Chain Infrastructure Inquiry',
            message: document.getElementById('message').value,
            appointment_requested: appointmentRequested ? 'Yes' : 'No',
            preferred_datetime: estDateTime
        };
        
        // Send email
        emailjs.send("service_gf8ewl9", "template_nad2dyc", params)
            .then(() => {
                if (appointmentRequested) {
                    showAlert("Thanks for your message and appointment request! We'll get back to you within 24 hours with a meeting invite.", 'success');
                } else {
                    showAlert("Thanks for your message! We'll get back to you within 24 hours.", 'success');
                }
                document.getElementById('contactForm').reset();
                document.getElementById('appointmentFields').classList.remove('show');
            })
            .catch((error) => {
                console.error('Error:', error);
                showAlert("Sorry, there was an error sending your message. Please try again.", 'error');
            })
            .finally(() => {
                // Re-enable button
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            });
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
{% endblock %}